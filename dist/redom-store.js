(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.main=b())})(this,function(){'use strict';function a(a,b){for(let c in b)a[c]=b[c];return a}return{Store:class{constructor(a){this.listeners=[],this.data=a||{}}subscribe(a){return this.listeners.push(a),()=>{this.unsubscribe(a)}}unsubscribe(a){let b=[];for(let c=0;c<this.listeners.length;c++)this.listeners[c]===a?a=null:b.push(this.listeners[c]);this.listeners=b}set(b,c,d){this.data=c?b:a(a({},this.data),b);let e=this.listeners;for(let a=0;a<e.length;a++)e[a](this.data,d)}get(){return this.data}action(a){function b(b){this.set(b,!1,a)}return function(){let c=[this.data];for(let a=0;a<arguments.length;a++)c.push(arguments[a]);let d=a.apply(this,c);if(null!==d)return d.then?d.then(b):b(d)}}}}});
