function assign(a,b){for(let c in b)a[c]=b[c];return a}class Store{constructor(a){this.subscribers=[],this.state=a||{}}subscribe(a){return this.subscribers.push(a),()=>{this.unsubscribe(a)}}unsubscribe(a){let b=[];for(let c=0;c<this.subscribers.length;c++)this.subscribers[c]===a?a=null:b.push(this.subscribers[c]);this.subscribers=b}setState(a,b){this.state=assign(assign({},this.state),a);let c=this.subscribers;for(let d=0;d<c.length;d++)c[d](this.state,b)}getState(){return this.state}dispatch(a){function b(b){this.setState(b,!1,a)}return function(){let c=[this.state];for(let a=0;a<arguments.length;a++)c.push(arguments[a]);let d=a.apply(this,c);if(null!==d)return d.then?d.then(b):b(d)}}}export default Store;
