function assign(a,b){for(let c in b)a[c]=b[c];return a}class Store{constructor(a){this.listeners=[],this.data=a||{}}subscribe(a){return this.listeners.push(a),()=>{this.unsubscribe(a)}}unsubscribe(a){let b=[];for(let c=0;c<this.listeners.length;c++)this.listeners[c]===a?a=null:b.push(this.listeners[c]);this.listeners=b}set(a,b,c){this.data=b?a:assign(assign({},this.data),a);let d=this.listeners;for(let e=0;e<d.length;e++)d[e](this.data,c)}get(){return this.data}action(a){function b(b){this.set(b,!1,a)}return function(){let c=[this.data];for(let a=0;a<arguments.length;a++)c.push(arguments[a]);let d=a.apply(this,c);if(null!==d)return d.then?d.then(b):b(d)}}}var index={Store};export default index;
